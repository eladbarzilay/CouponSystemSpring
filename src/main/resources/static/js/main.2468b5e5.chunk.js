(this.webpackJsonpcouponsystem=this.webpackJsonpcouponsystem||[]).push([[0],{114:function(e,t,c){},115:function(e,t,c){},116:function(e,t,c){},117:function(e,t,c){},118:function(e,t,c){},119:function(e,t,c){},120:function(e,t,c){},121:function(e,t,c){},122:function(e,t,c){},123:function(e,t,c){},124:function(e,t,c){},125:function(e,t,c){},126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(13),r=c.n(a),i=(c(80),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,157)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))}),o=c(7),d=c(15),u=c(20),j=c(19),l=(c(81),c(0)),b=function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(e){var n;return Object(o.a)(this,c),(n=t.call(this,e)).timerid=0,n.state={time:""},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.timerid=window.setInterval((function(){var t=new Date;e.setState({time:t.toLocaleTimeString()})}),1e3)}},{key:"render",value:function(){return Object(l.jsx)("div",{className:"Clock",children:Object(l.jsx)("p",{children:this.state.time})})}}]),c}(n.Component);c(83);var O,h=function(){return Object(l.jsxs)("div",{className:"Footer",children:[Object(l.jsx)(b,{}),Object(l.jsxs)("h1",{children:["    all rights reserved to ",Object(l.jsx)("a",{href:"https://www.linkedin.com/in/elad-barzilay-%D7%90%D7%9C%D7%A2%D7%93-%D7%91%D7%A8%D7%96%D7%99%D7%9C%D7%90%D7%99-04b34ba1/",target:"_blank",children:"elad barzilay"})," \xa9"]})]})},p=c(8),m=c(54),x=c(4),f=function e(){Object(o.a)(this,e),this.adminCustomer=[]};function y(e){return{type:O.adminCustomerAdded,payload:e}}function v(e){return{type:O.adminCustomerUpdated,payload:e}}function D(e){return{type:O.adminCustomerDeleted,payload:e}}!function(e){e.adminCustomerDownloaded="adminCustomerDownloaded",e.adminCustomerAdded="adminCustomerAdded",e.adminCustomerUpdated="adminCustomerUpdated",e.adminCustomerDeleted="adminCustomerDeleted"}(O||(O={}));var S,C=function e(){Object(o.a)(this,e),this.admin=[]};function g(e){return{type:S.adminAdded,payload:e}}function E(e){return{type:S.adminUpdated,payload:e}}function A(e){return{type:S.adminDeleted,payload:e}}!function(e){e.adminDownloaded="adminDownloaded",e.adminAdded="adminAdded",e.adminUpdated="adminUpdated",e.adminDeleted="adminDeleted"}(S||(S={}));var N,T=function e(){Object(o.a)(this,e),this.user=null;var t=JSON.parse(localStorage.getItem("user"));t&&(this.user=t)};function P(e){return{type:N.Login,payload:e}}!function(e){e.Login="Login",e.Logout="Logout"}(N||(N={}));var U,w=function e(){Object(o.a)(this,e),this.company=[]};function _(e){return{type:U.companyAdded,payload:e}}function k(e){return{type:U.companyUpdated,payload:e}}function L(e){return{type:U.companyDeleted,payload:e}}!function(e){e.companyDownloaded="companyDownloaded",e.companyAdded="companyAdded",e.companyUpdated="companyUpdated",e.companyDeleted="companyDeleted"}(U||(U={}));var M,I=function e(){Object(o.a)(this,e),this.customerPurchase=[]};function R(e){return{type:M.customerPurchaseDownloaded,payload:e}}!function(e){e.customerPurchaseDownloaded="customerPurchaseDownloaded",e.customerPurchaseAdded="customerPurchaseAdded",e.customerPurchaseUpdated="customerPurchaseUpdated",e.customerPurchaseDeleted="customerPurchaseDeleted"}(M||(M={}));var G,Y=function e(){Object(o.a)(this,e),this.customer=[]};function q(e){return{type:G.customerDownloaded,payload:e}}!function(e){e.customerDownloaded="customerDownloaded",e.customerAdded="customerAdded",e.customerUpdated="customerUpdated",e.customerDeleted="customerDeleted"}(G||(G={}));var F=Object(m.a)({adminState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C,t=arguments.length>1?arguments[1]:void 0,c=Object(x.a)({},e);switch(t.type){case S.adminDownloaded:console.log(t.payload),c.admin=t.payload;break;case S.adminAdded:c.admin.push(t.payload);break;case S.adminUpdated:break;case S.adminDeleted:c.admin=c.admin.filter((function(e){return e.id!==t.payload}))}return c},adminCustomerState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f,t=arguments.length>1?arguments[1]:void 0,c=Object(x.a)({},e);switch(t.type){case O.adminCustomerDownloaded:console.log(t.payload),c.adminCustomer=t.payload;break;case O.adminCustomerAdded:c.adminCustomer.push(t.payload);break;case O.adminCustomerUpdated:break;case O.adminCustomerDeleted:c.adminCustomer=c.adminCustomer.filter((function(e){return e.id!==t.payload}))}return c},companyState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w,t=arguments.length>1?arguments[1]:void 0,c=Object(x.a)({},e);switch(t.type){case U.companyDownloaded:console.log(t.payload),c.company=t.payload;break;case U.companyAdded:c.company.push(t.payload);break;case U.companyUpdated:break;case U.companyDeleted:c.company=c.company.filter((function(e){return e.id!==t.payload}))}return c},CustomerState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Y,t=arguments.length>1?arguments[1]:void 0,c=Object(x.a)({},e);switch(t.type){case G.customerDownloaded:console.log(t.payload),c.customer=t.payload;break;case G.customerAdded:c.customer.push(t.payload);break;case G.customerUpdated:break;case G.customerDeleted:c.customer=c.customer.filter((function(e){return e.id!==t.payload}))}return c},customerPurchaseState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new I,t=arguments.length>1?arguments[1]:void 0,c=Object(x.a)({},e);switch(t.type){case M.customerPurchaseDownloaded:console.log(t.payload),c.customerPurchase=t.payload;break;case M.customerPurchaseAdded:c.customerPurchase.push(t.payload);break;case M.customerPurchaseUpdated:break;case M.customerPurchaseDeleted:c.customerPurchase=c.customerPurchase.filter((function(e){return e.id!==t.payload}))}return c},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new T,t=arguments.length>1?arguments[1]:void 0,c=Object(x.a)({},e);switch(t.type){case N.Login:c.user=t.payload,localStorage.setItem("user",JSON.stringify(c.user));break;case N.Logout:c.user=null,localStorage.removeItem("user")}return c}}),H=Object(m.b)(F),V=(c(84),function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(e){var n;return Object(o.a)(this,c),(n=t.call(this,e)).unsubscribe=void 0,n.state={user:H.getState().authState.user},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=this;H.subscribe((function(){e.setState({user:H.getState().authState.user})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:"AuthMenu",children:[this.state.user&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("span",{children:["Hello ",this.state.user.clientType.toLowerCase()]}),Object(l.jsx)("span",{children:" | "}),Object(l.jsx)(p.b,{to:"/logout",className:"normal",activeClassName:"active",children:"Logout"})]}),!this.state.user&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{children:"Hello Guest"}),Object(l.jsx)("span",{children:" | "}),Object(l.jsx)(p.b,{to:"/login",className:"normal",activeClassName:"active",children:"Login"})]})]})}}]),c}(n.Component));c(90);var z=function(){return Object(l.jsx)("div",{className:"Logo",children:Object(l.jsx)("img",{src:"https://media.giphy.com/media/ADgfsbHcS62Jy/giphy.gif",alt:""})})};c(91);var W=function(){return Object(l.jsx)("div",{className:"Header",children:Object(l.jsxs)("h1",{children:[" ",Object(l.jsxs)("p",{children:[Object(l.jsx)(z,{}),"  "]})," coupon system    ",Object(l.jsxs)("span",{children:[" ",Object(l.jsx)(V,{})," "]})]})})};c(92);var J=function(){return Object(l.jsx)("div",{className:"Main",children:Object(l.jsx)("img",{src:"https://media.giphy.com/media/Ayx3dO4xruVqM/giphy.gif",alt:""})})},B=(c(93),c(11));c(94);var K,Z,$=function(){return Object(l.jsx)("div",{className:"Page404",children:Object(l.jsx)("img",{src:"https://media.giphy.com/media/3o6ZtpRoYe9wbyfcBi/giphy.gif",alt:""})})},Q=c(3),X=c.n(Q),ee=c(6),te=c(45),ce=c.n(te),ne=c(22),se=function e(){Object(o.a)(this,e)},ae=new(function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(){var e;Object(o.a)(this,c);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).urls={login:"https://elad-barzilay-coupons-system.herokuapp.com/client/",logout:"https://elad-barzilay-coupons-system.herokuapp.com/client/",admin:"https://elad-barzilay-coupons-system.herokuapp.com/admin/",companies:"https://elad-barzilay-coupons-system.herokuapp.com/companies/",customers:"https://elad-barzilay-coupons-system.herokuapp.com/customers/"},e}return c}(se)),re=c(67);!function(e){e.ADDED_COUPON="Added coupon successfully",e.DOWNLOADED_COUPONS="All coupons are here!",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGOUT_SUCCESS="LOGOUT_SUCCESS",e.REGISTER_SUCCESS="REGISTER_SUCCESS",e.ADDED_COUPONS="ADDED_COUPON",e.GET_COMPANIES="GET_COMPANIES",e.WRONG_LOGIN="WRONG USERNAME OR PASSWORD",e.ADD_COMPANY="ADD_COMPANY",e.ADD_CUSTOMER="ADD_CUSTOMER",e.UPDATE_COMPANY="UPDATE_COMPANY",e.UPDATE_CUSTOMER="UPDATE_CUSTOMER",e.GET_CUSTOMERS="GET_CUSTOMERS",e.DELETE_COMPANY="DELETE_COMPANY",e.DELETE_CUSTOMER="DELETE_CUSTOMER",e.GET_COUPONS="GET_COUPONS",e.DELETE_COUPON="DELETE_COUPON",e.ADD_COUPON="ADD_COUPON",e.UPDATE_COUPON="UPDATE_COUPON",e.GET_COUPONS_PURCHASE="GET_COUPONS_PURCHASE",e.PURCHASED_COUPONS="PURCHASED_COUPONS",e.CONFIRM="Are you sure you want to purchase coupon "}(K||(K={})),function(e){e[e.PLS_LOGIN=0]="PLS_LOGIN",e[e.LOGIN_FAILED=1]="LOGIN_FAILED",e[e.LOGOUT_FAILED=2]="LOGOUT_FAILED",e[e.ADD_COMPANY=3]="ADD_COMPANY",e[e.ADD_CUSTOMER=4]="ADD_CUSTOMER",e[e.UPDATE_COMPANY=5]="UPDATE_COMPANY",e[e.UPDATE_CUSTOMER=6]="UPDATE_CUSTOMER",e[e.GET_COMPANIES=7]="GET_COMPANIES",e[e.GET_CUSTOMERS=8]="GET_CUSTOMERS",e[e.DELETE_COMPANY=9]="DELETE_COMPANY",e[e.DELETE_CUSTOMER=10]="DELETE_CUSTOMER",e[e.GET_COUPONS=11]="GET_COUPONS",e[e.DELETE_COUPON=12]="DELETE_COUPON",e[e.ADD_COUPON=13]="ADD_COUPON",e[e.UPDATE_COUPON=14]="UPDATE_COUPON",e[e.GET_COUPONS_PURCHASE=15]="GET_COUPONS_PURCHASE",e[e.PURCHASE_COUPON=16]="PURCHASE_COUPON"}(Z||(Z={}));var ie=new(function(){function e(){Object(o.a)(this,e),this.notification=new re.a({duration:4e3,position:{x:"left",y:"top"}})}return Object(d.a)(e,[{key:"success",value:function(e){this.notification.success(e)}},{key:"error",value:function(e){var t=this.extractMsg(e);this.notification.error(t)}},{key:"extractMsg",value:function(e){var t,c,n;return"string"===typeof e?e:"string"===typeof(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)?e.response.data:Array.isArray(null===e||void 0===e||null===(c=e.response)||void 0===c?void 0:c.data)?null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data[0]:"string"===typeof(null===e||void 0===e?void 0:e.message)?e.message:"An error occurred, please try again."}}]),e}());c(114);var oe=function(){var e=Object(B.g)(),t=Object(ne.a)(),c=t.register,n=t.handleSubmit;function s(){return(s=Object(ee.a)(X.a.mark((function t(c){var n,s;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(c),t.prev=1,n="",console.log(c.clientType),t.t0=c.clientType,t.next="ADMINISTRATOR"===t.t0?7:"COMPANY"===t.t0?9:"CUSTOMER"===t.t0?11:13;break;case 7:return n=ae.urls.admin+"login",t.abrupt("break",14);case 9:return n=ae.urls.companies+"login",t.abrupt("break",14);case 11:return n=ae.urls.customers+"login",t.abrupt("break",14);case 13:e.push("/home");case 14:return console.log(n),t.next=17,ce.a.post(n,c);case 17:s=t.sent,console.log(s.data),H.dispatch(P(s.data)),console.log(c.clientType),t.t1=c.clientType,t.next="ADMINISTRATOR"===t.t1?24:"COMPANY"===t.t1?26:"CUSTOMER"===t.t1?28:30;break;case 24:return e.push("/admin"),t.abrupt("return",s.data);case 26:return e.push("/companies"),t.abrupt("return",s.data);case 28:return e.push("/customers"),t.abrupt("return",s.data);case 30:e.push("/home");case 31:ie.success("ok"),t.next=38;break;case 34:t.prev=34,t.t2=t.catch(1),console.log(t.t2),ie.error("no no");case 38:case"end":return t.stop()}}),t,null,[[1,34]])})))).apply(this,arguments)}return t.formState.errors,Object(l.jsxs)("div",{className:"Login",children:[Object(l.jsx)("h2",{children:"Login"}),Object(l.jsxs)("form",{onSubmit:n((function(e){return s.apply(this,arguments)})),children:[Object(l.jsxs)("select",Object(x.a)(Object(x.a)({},c("clientType",{required:{value:!0,message:"Missing User Type"}})),{},{children:[Object(l.jsx)("option",{value:"",disabled:!0,children:"User Type"}),Object(l.jsx)("option",{value:"ADMINISTRATOR",children:"Administrator"}),Object(l.jsx)("option",{value:"CUSTOMER",children:"Customer"}),Object(l.jsx)("option",{value:"COMPANY",children:"Company"})]})),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",placeholder:"Email"},c("email",{required:!0,pattern:/^\S+@\S+$/i}))),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"password",placeholder:"Password"},c("password",{required:!0,minLength:4,maxLength:22}))),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"Login"})]})]})};c(115);var de=function(e){return Object(l.jsxs)("div",{className:"EmptyView",children:[Object(l.jsx)("h2",{children:e.msg}),Object(l.jsx)("img",{src:"https://media.giphy.com/media/dZdadd8KqjgsJGjMVp/giphy.gif",alt:""})]})};var ue=function(){var e=Object(B.g)();return Object(n.useEffect)((function(){ie.success(K.LOGOUT_SUCCESS),H.dispatch({type:N.Logout}),e.push("/home")})),Object(l.jsx)(l.Fragment,{})},je=ce.a.create();je.interceptors.request.use((function(e){var t;return e.headers={authorization:null===(t=H.getState().authState.user)||void 0===t?void 0:t.token},e}));var le=je,be=(c(116),function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(e){var n;return Object(o.a)(this,c),(n=t.call(this,e)).unsubscribe=void 0,n.state={companies:H.getState().adminState.admin,customers:H.getState().adminCustomerState.adminCustomer},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(X.a.mark((function e(){var t,c,n=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unsubscribe=H.subscribe((function(){n.setState({companies:H.getState().adminState.admin,customers:H.getState().adminCustomerState.adminCustomer})})),e.prev=1,e.next=4,le.get(ae.urls.admin+"companies");case 4:t=e.sent,console.log(t.status),H.dispatch((a=t.data,{type:S.adminDownloaded,payload:a})),this.setState({companies:t.data}),ie.success(K.GET_COMPANIES),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),ie.error(Z.GET_COMPANIES);case 14:return e.prev=14,e.next=17,le.get(ae.urls.admin+"customers");case 17:c=e.sent,console.log(c.status),H.dispatch((s=c.data,{type:O.adminCustomerDownloaded,payload:s})),this.setState({customers:c.data}),ie.success(K.GET_CUSTOMERS),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(14),ie.error(Z.GET_CUSTOMERS);case 27:case"end":return e.stop()}var s,a}),e,this,[[1,11],[14,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"delete",value:function(){var e=Object(ee.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete id="+t+"?")){e.next=13;break}return e.prev=2,e.next=5,le.delete(ae.urls.admin+"company/"+t);case 5:H.dispatch(A(t)),this.setState({companies:H.getState().adminState.admin}),ie.success(K.DELETE_COMPANY),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),ie.error(Z.DELETE_COMPANY);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(ee.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete id="+t+"?")){e.next=13;break}return e.prev=2,e.next=5,le.delete(ae.urls.admin+"customer/"+t);case 5:H.dispatch(D(t)),this.setState({customers:H.getState().adminCustomerState.adminCustomer}),ie.success(K.DELETE_CUSTOMER),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),ie.error(Z.DELETE_CUSTOMER);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"Admin",children:[Object(l.jsx)("h1",{children:"Companies"}),0===this.state.companies.length&&Object(l.jsx)("table",{children:Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Id"}),Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Email"}),Object(l.jsx)("th",{children:"Password"}),Object(l.jsxs)("th",{children:["Actions"," ",Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"admin/company/add",children:"\u2795"})]})]})})}),0!==this.state.companies.length&&Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Id"}),Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Email"}),Object(l.jsx)("th",{children:"Password"}),Object(l.jsxs)("th",{children:["Actions"," ",Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"admin/company/add",children:Object(l.jsx)("a",{className:"plus",children:"+"})})]})]})}),Object(l.jsx)("tbody",{children:this.state.companies.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.id}),Object(l.jsx)("td",{children:t.name}),Object(l.jsx)("td",{children:t.email}),Object(l.jsx)("td",{children:t.password}),Object(l.jsxs)("td",{children:[Object(l.jsx)("button",{onClick:function(){return e.delete(t.id)},children:"\ud83d\uddd1\ufe0f"}),Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"admin/company/update/"+t.id,children:" \ud83d\udd8b\ufe0f "})]})]},t.id)}))})]}),Object(l.jsx)("br",{}),Object(l.jsx)("h1",{children:"Customers"}),0===this.state.customers.length&&Object(l.jsx)("table",{children:Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Id"}),Object(l.jsx)("th",{children:"First Name"}),Object(l.jsx)("th",{children:"Last Name"}),Object(l.jsx)("th",{children:"Email"}),Object(l.jsx)("th",{children:"Password"}),Object(l.jsxs)("th",{children:["Actions"," ",Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"admin/customer/add",children:"\u2795"})]})]})})}),0!==this.state.customers.length&&Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Id"}),Object(l.jsx)("th",{children:"First Name"}),Object(l.jsx)("th",{children:"Last Name"}),Object(l.jsx)("th",{children:"Email"}),Object(l.jsx)("th",{children:"Password"}),Object(l.jsxs)("th",{children:["Actions"," ",Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"admin/customer/add",children:Object(l.jsx)("a",{className:"plus",children:"+"})})]})]})}),Object(l.jsx)("tbody",{children:this.state.customers.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.id}),Object(l.jsx)("td",{children:t.firstName}),Object(l.jsx)("td",{children:t.lastName}),Object(l.jsx)("td",{children:t.email}),Object(l.jsx)("td",{children:t.password}),Object(l.jsxs)("td",{children:[Object(l.jsx)("button",{onClick:function(){return e.deleteCustomer(t.id)},children:"\ud83d\uddd1\ufe0f"}),Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"admin/customer/update/"+t.id,children:" \ud83d\udd8b\ufe0f "})]})]},t.id)}))})]})]})}}]),c}(n.Component));c(117);var Oe,he=function(){return Object(l.jsx)("div",{className:"AdminArea",children:Object(l.jsx)(be,{})})};!function(e){e.admin="ADMINISTRATOR",e.company="COMPANY",e.customer="CUSTOMER"}(Oe||(Oe={}));var pe=Oe,me=(c(118),function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(e){var n;return Object(o.a)(this,c),(n=t.call(this,e)).unsubscribe=void 0,n.state={coupons:H.getState().CustomerState.customer,couponsPurchase:H.getState().customerPurchaseState.customerPurchase,user:H.getState().authState.user},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(X.a.mark((function e(){var t,c,n,s,a=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(null===(t=this.state.user)||void 0===t?void 0:t.clientType),console.log(pe.customer),(null===(c=this.state.user)||void 0===c?void 0:c.clientType)!==pe.customer&&ie.error(Z.PLS_LOGIN),this.unsubscribe=H.subscribe((function(){a.setState({coupons:H.getState().CustomerState.customer,couponsPurchase:H.getState().customerPurchaseState.customerPurchase})})),e.prev=4,e.next=7,le.get(ae.urls.customers+"allCoupons");case 7:n=e.sent,H.dispatch(q(n.data)),this.setState({coupons:n.data}),ie.success(K.GET_COUPONS),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),ie.error(Z.GET_COUPONS);case 16:return e.prev=16,e.next=19,le.get(ae.urls.customers+"coupons");case 19:s=e.sent,console.log(s.status),H.dispatch(R(s.data)),this.setState({couponsPurchase:s.data}),ie.success(K.GET_COUPONS_PURCHASE),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(16),ie.error(Z.GET_COUPONS_PURCHASE);case 29:case"end":return e.stop()}}),e,this,[[4,13],[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"purchase",value:function(){var e=Object(ee.a)(X.a.mark((function e(t){var c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to purchase coupon "+t.title+"?")){e.next=23;break}return e.prev=2,e.next=5,le.post(ae.urls.customers+"coupons/"+t.id);case 5:H.dispatch((n=t,{type:M.customerPurchaseAdded,payload:n})),this.setState({couponsPurchase:H.getState().customerPurchaseState.customerPurchase}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),ie.error(Z.PURCHASE_COUPON);case 12:return e.prev=12,e.next=15,le.get(ae.urls.customers+"allCoupons");case 15:c=e.sent,H.dispatch(q(c.data)),this.setState({coupons:c.data}),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(12),ie.error(Z.GET_COUPONS);case 23:case"end":return e.stop()}var n}),e,this,[[2,9],[12,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDate",value:function(e){var t=new Date(e),c=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2);return("0"+t.getDate()).slice(-2)+"-"+n+"-"+c}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"Customer",children:[Object(l.jsx)("h1",{children:"Purchased Coupons"}),0===this.state.couponsPurchase.length&&Object(l.jsx)("table",{children:Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"CATEGORY"}),Object(l.jsx)("th",{children:"TITLE"}),Object(l.jsx)("th",{children:"PRICE"}),Object(l.jsx)("th",{children:"AMOUNT"}),Object(l.jsx)("th",{children:"DESCRIPTION"}),Object(l.jsx)("th",{children:"START_DATE"}),Object(l.jsx)("th",{children:"END_DATE"})]})})}),0!==this.state.couponsPurchase.length&&Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"CATEGORY"}),Object(l.jsx)("th",{children:"TITLE"}),Object(l.jsx)("th",{children:"PRICE"}),Object(l.jsx)("th",{children:"DESCRIPTION"}),Object(l.jsx)("th",{children:"START_DATE"}),Object(l.jsx)("th",{children:"END_DATE"})]})}),Object(l.jsx)("tbody",{children:this.state.couponsPurchase.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.category}),Object(l.jsx)("td",{children:t.title}),Object(l.jsx)("td",{children:t.price}),Object(l.jsx)("td",{children:t.description}),Object(l.jsx)("td",{children:e.getDate(t.startDate)}),Object(l.jsx)("td",{children:e.getDate(t.endDate)})]},t.id)}))})]}),Object(l.jsx)("h1",{children:"ALL Coupons"}),0!==this.state.coupons.length&&Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"CATEGORY"}),Object(l.jsx)("th",{children:"TITLE"}),Object(l.jsx)("th",{children:"PRICE"}),Object(l.jsx)("th",{children:"AMOUNT"}),Object(l.jsx)("th",{children:"DESCRIPTION"}),Object(l.jsx)("th",{children:"START_DATE"}),Object(l.jsx)("th",{children:"END_DATE"}),Object(l.jsx)("th",{children:"Action"})]})}),Object(l.jsx)("tbody",{children:this.state.coupons.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.category}),Object(l.jsx)("td",{children:t.title}),Object(l.jsx)("td",{children:t.price}),Object(l.jsx)("td",{children:t.amount}),Object(l.jsx)("td",{children:t.description}),Object(l.jsx)("td",{children:e.getDate(t.startDate)}),Object(l.jsx)("td",{children:e.getDate(t.endDate)}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{onClick:function(){return e.purchase(t)},children:"Purchase"})})]},t.id)}))})]})]})}}]),c}(n.Component)),xe=(c(119),function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(e){var n;return Object(o.a)(this,c),(n=t.call(this,e)).unsubscribe=void 0,n.state={coupons:H.getState().companyState.company},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(X.a.mark((function e(){var t,c=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unsubscribe=H.subscribe((function(){c.setState({coupons:H.getState().companyState.company})})),e.prev=1,e.next=4,le.get(ae.urls.companies+"coupons");case 4:t=e.sent,console.log(t.status),H.dispatch((n=t.data,{type:U.companyDownloaded,payload:n})),this.setState({coupons:t.data}),ie.success(K.GET_COUPONS),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),ie.error(Z.GET_COUPONS);case 14:case"end":return e.stop()}var n}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"delete",value:function(){var e=Object(ee.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete id="+t+"?")){e.next=13;break}return e.prev=2,e.next=5,le.delete(ae.urls.companies+"coupons/"+t);case 5:H.dispatch(L(t)),this.setState({coupons:H.getState().companyState.company}),ie.success(K.DELETE_COUPON),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),ie.error(Z.DELETE_COUPON);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDate",value:function(e){var t=new Date(e),c=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2);return("0"+t.getDate()).slice(-2)+"-"+n+"-"+c}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"Company",children:[Object(l.jsx)("h1",{children:"Company Coupons"}),0===this.state.coupons.length&&Object(l.jsx)("table",{children:Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Id"}),Object(l.jsx)("th",{children:"COMPANY ID"}),Object(l.jsx)("th",{children:"CATEGORY"}),Object(l.jsx)("th",{children:"TITLE"}),Object(l.jsx)("th",{children:"PRICE"}),Object(l.jsx)("th",{children:"AMOUNT"}),Object(l.jsx)("th",{children:"DESCRIPTION"}),Object(l.jsx)("th",{children:"START_DATE"}),Object(l.jsx)("th",{children:"END_DATE"}),Object(l.jsxs)("th",{children:["Actions"," ",Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"/companies/coupon/add",children:Object(l.jsx)("a",{className:"plus",children:"+"})})]})]})})}),0!==this.state.coupons.length&&Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Id"}),Object(l.jsx)("th",{children:"COMPANY ID"}),Object(l.jsx)("th",{children:"CATEGORY"}),Object(l.jsx)("th",{children:"TITLE"}),Object(l.jsx)("th",{children:"PRICE"}),Object(l.jsx)("th",{children:"AMOUNT"}),Object(l.jsx)("th",{children:"DESCRIPTION"}),Object(l.jsx)("th",{children:"START_DATE"}),Object(l.jsx)("th",{children:"END_DATE"}),Object(l.jsxs)("th",{children:["Actions"," ",Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"/companies/coupon/add",children:Object(l.jsx)("a",{className:"plus",children:"+"})})]})]})}),Object(l.jsx)("tbody",{children:this.state.coupons.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.id}),Object(l.jsx)("td",{children:t.companyID}),Object(l.jsx)("td",{children:t.category}),Object(l.jsx)("td",{children:t.title}),Object(l.jsx)("td",{children:t.price}),Object(l.jsx)("td",{children:t.amount}),Object(l.jsx)("td",{children:t.description}),Object(l.jsx)("td",{children:e.getDate(t.startDate)}),Object(l.jsx)("td",{children:e.getDate(t.endDate)}),Object(l.jsxs)("td",{children:[Object(l.jsx)("button",{onClick:function(){return e.delete(t.id)},children:"\ud83d\uddd1\ufe0f "}),Object(l.jsx)(p.b,{style:{textDecoration:"none"},to:"companies/coupon/update/"+t.id,children:" \ud83d\udd8b\ufe0f "})]})]},t.id)}))})]})]})}}]),c}(n.Component));c(120);var fe=function(){var e,t,c,s=Object(ne.a)({mode:"onTouched"}),a=s.register,r=s.handleSubmit,i=s.formState,o=i.errors,d=i.isDirty,u=i.isValid,j=Object(B.g)();function b(){return(b=Object(ee.a)(X.a.mark((function e(t){var c,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,le.put(ae.urls.admin+"company",t);case 4:c=e.sent,n=c.data,H.dispatch(g(n)),ie.success(K.ADD_COMPANY),j.push("/admin"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(Z.ADD_COMPANY);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){H.getState().authState.user||(ie.error(Z.PLS_LOGIN),j.push("/login"))})),Object(l.jsxs)("div",{className:"AddCompany",children:[Object(l.jsx)("h2",{children:"Add Company"}),Object(l.jsxs)("form",{onSubmit:r((function(e){return b.apply(this,arguments)})),children:[Object(l.jsx)("label",{children:"Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"name",name:"name"},a("name",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),"required"===(null===(e=o.name)||void 0===e?void 0:e.type)&&Object(l.jsx)("span",{children:"missing name"}),"minLength"===(null===(t=o.name)||void 0===t?void 0:t.type)&&Object(l.jsx)("span",{children:"name is too short"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Email"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"email",name:"email"},a("email"))),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:null===(c=o.email)||void 0===c?void 0:c.message}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Password"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"password",name:"password"},a("password",{required:!0}))),Object(l.jsx)("br",{}),o.password&&Object(l.jsx)("span",{children:"missing password"}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",disabled:!d||!u,color:"primary",children:"Add"})]})]})};c(121);var ye=function(){var e,t,c,s,a,r=Object(ne.a)({mode:"onTouched"}),i=r.register,o=r.handleSubmit,d=r.formState,u=d.errors,j=d.isDirty,b=d.isValid,O=Object(B.g)();function h(){return(h=Object(ee.a)(X.a.mark((function e(t){var c,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,le.put(ae.urls.admin+"customer",t);case 4:c=e.sent,n=c.data,H.dispatch(y(n)),ie.success(K.ADD_CUSTOMER),O.push("/admin"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),ie.error(Z.ADD_CUSTOMER);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){H.getState().authState.user||(ie.error(Z.PLS_LOGIN),O.push("/login"))})),Object(l.jsxs)("div",{className:"AddCustomer",children:[Object(l.jsx)("h2",{children:"Add Customer"}),Object(l.jsxs)("form",{onSubmit:o((function(e){return h.apply(this,arguments)})),children:[Object(l.jsx)("label",{children:"First Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"firstName",name:"firstName"},i("firstName",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),"required"===(null===(e=u.firstName)||void 0===e?void 0:e.type)&&Object(l.jsx)("span",{children:"missing firstName"}),"minLength"===(null===(t=u.firstName)||void 0===t?void 0:t.type)&&Object(l.jsx)("span",{children:"firstName is too short"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Last Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"lastName",name:"lastName"},i("lastName",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),"required"===(null===(c=u.lastName)||void 0===c?void 0:c.type)&&Object(l.jsx)("span",{children:"missing lastName"}),"minLength"===(null===(s=u.lastName)||void 0===s?void 0:s.type)&&Object(l.jsx)("span",{children:"lastName is too short"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Email"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"email",name:"email"},i("email"))),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:null===(a=u.email)||void 0===a?void 0:a.message}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Password"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"password",name:"password"},i("password",{required:!0}))),Object(l.jsx)("br",{}),u.password&&Object(l.jsx)("span",{children:"missing password"}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",disabled:!j||!b,color:"primary",children:"Add"})]})]})},ve=c(18);c(122);var De=function(e){var t,c=Object(ne.a)({mode:"onTouched"}),s=c.register,a=c.handleSubmit,r=c.formState,i=r.errors,o=(r.isDirty,r.isValid,Object(B.g)()),d=+e.match.params.id,u=Object(n.useState)(H.getState().adminState.admin.find((function(e){return e.id===d}))),j=Object(ve.a)(u,2),b=j[0];function O(){return(O=Object(ee.a)(X.a.mark((function e(t){var c,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,le.post(ae.urls.admin+"company",t);case 4:c=e.sent,n=c.data,H.dispatch(E(n)),ie.success(K.UPDATE_COMPANY),o.push("/admin"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),ie.error(Z.UPDATE_COMPANY);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return j[1],Object(n.useEffect)((function(){H.getState().authState.user||(ie.error(Z.PLS_LOGIN),o.push("/login"))})),Object(l.jsxs)("div",{className:"UpdateCompany",children:[Object(l.jsx)("h2",{children:"Update Company"}),Object(l.jsxs)("form",{onSubmit:a((function(e){return O.apply(this,arguments)})),children:[Object(l.jsx)("input",Object(x.a)(Object(x.a)({type:"hidden",name:"id",value:null===b||void 0===b?void 0:b.id},s("id")),{},{color:"grey"})),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"name",name:"name",value:null===b||void 0===b?void 0:b.name},s("name"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Email"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"email",name:"email",defaultValue:b.email},s("email",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:null===(t=i.email)||void 0===t?void 0:t.message}),i.email&&Object(l.jsx)("span",{children:"missing email"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Password"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"password",name:"password"},s("password",{required:!0}))),Object(l.jsx)("br",{}),i.password&&Object(l.jsx)("span",{children:"missing password"}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",color:"primary",children:"Update"})]})]})};c(123);var Se,Ce=function(e){var t,c=Object(ne.a)({mode:"onTouched"}),s=c.register,a=c.handleSubmit,r=c.formState,i=r.errors,o=(r.isDirty,r.isValid,Object(B.g)()),d=+e.match.params.id,u=Object(n.useState)(H.getState().adminCustomerState.adminCustomer.find((function(e){return e.id===d}))),j=Object(ve.a)(u,2),b=j[0];function O(){return(O=Object(ee.a)(X.a.mark((function e(t){var c,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,le.post(ae.urls.admin+"customer",t);case 4:c=e.sent,n=c.data,H.dispatch(v(n)),ie.success(K.UPDATE_CUSTOMER),o.push("/admin"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),ie.error(Z.UPDATE_CUSTOMER);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return j[1],Object(n.useEffect)((function(){H.getState().authState.user||(ie.error(Z.PLS_LOGIN),o.push("/login"))})),Object(l.jsxs)("div",{className:"UpdateCustomer",children:[Object(l.jsx)("h2",{children:"Update Customer"}),Object(l.jsx)("br",{}),Object(l.jsxs)("form",{onSubmit:a((function(e){return O.apply(this,arguments)})),children:[Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"hidden",name:"id",value:null===b||void 0===b?void 0:b.id},s("id"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"First Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"firstName",name:"firstName",value:null===b||void 0===b?void 0:b.firstName},s("firstName"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Last Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"lastName",name:"lastName",value:null===b||void 0===b?void 0:b.lastName},s("lastName"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Email"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"email",name:"email",defaultValue:b.email},s("email",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:null===(t=i.email)||void 0===t?void 0:t.message}),i.email&&Object(l.jsx)("span",{children:"missing email"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Password"})," ",Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"password",name:"password"},s("password",{required:!0}))),Object(l.jsx)("br",{}),i.password&&Object(l.jsx)("span",{children:"missing password"}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",color:"primary",children:"Update"})]})]})};!function(e){e.food="FOOD",e.electricity="ELECTRICITY",e.cars="CARS",e.vacation="VACATION"}(Se||(Se={}));var ge=Se;c(124);var Ee=function(){var e,t,c=Object(ne.a)({mode:"onTouched"}),s=c.register,a=c.handleSubmit,r=c.formState,i=r.errors,o=(r.isDirty,r.isValid,Object(B.g)());function d(){return(d=Object(ee.a)(X.a.mark((function e(t){var c,n,s,a,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),e.prev=1,c=new Date(t.startDate).setHours(0,0,0,0),n=new Date(t.endDate).setHours(0,0,0,0),s=(new Date).setHours(0,0,0,0),!(c.valueOf()>n.valueOf())){e.next=10;break}return alert("endDate can't be less then startDate"),e.abrupt("return");case 10:if(!(c.valueOf()<s.valueOf())){e.next=13;break}return alert("startDate can't be less then current Date"),e.abrupt("return");case 13:return e.next=15,le.post(ae.urls.companies+"coupon",t);case 15:a=e.sent,r=a.data,console.log(" added object "+r),H.dispatch(_(r)),ie.success(K.ADD_COUPON),o.push("/companies"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),ie.error(Z.ADD_COUPON);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){H.getState().authState.user||(ie.error(Z.PLS_LOGIN),o.push("/login"))})),Object(l.jsxs)("div",{className:"AddCompanyCoupon",children:[Object(l.jsx)("h2",{children:"Add Company Coupon"}),Object(l.jsxs)("form",{onSubmit:a((function(e){return d.apply(this,arguments)})),children:[Object(l.jsx)("label",{children:"Category"}),Object(l.jsx)("br",{}),Object(l.jsxs)("select",Object(x.a)(Object(x.a)({name:"category"},s("category")),{},{children:[Object(l.jsx)("option",{value:ge.food,children:"FOOD"}),Object(l.jsx)("option",{value:ge.electricity,children:"ELECTRICITY"}),Object(l.jsx)("option",{value:ge.vacation,children:"VACATION"}),Object(l.jsx)("option",{value:ge.cars,children:"CARS"})]})),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"company ID"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",name:"company ID"},s("companyID",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Title"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",name:"title"},s("title",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Price"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"double",name:"price"},s("price",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Amount"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"amount",name:"amount"},s("amount",{required:!0,min:0}))),Object(l.jsx)("br",{}),"min"===(null===(e=i.amount)||void 0===e?void 0:e.type)&&Object(l.jsx)("span",{children:"minimum amount should be zero"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Description"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",name:"description"},s("description",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),"minLength"===(null===(t=i.description)||void 0===t?void 0:t.type)&&Object(l.jsx)("span",{children:"minimum description length is 10"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Start Date"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"date",name:"start_date"},s("startDate",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"End Date"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"date",name:"end_date"},s("endDate",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Add Coupon"})]})]})};c(125);var Ae=function(e){var t=Object(ne.a)({mode:"onTouched"}),c=t.register,s=t.handleSubmit,a=t.formState,r=(a.errors,a.isDirty,a.isValid,Object(B.g)()),i=+e.match.params.id,o=Object(n.useState)(H.getState().companyState.company.find((function(e){return e.id===i}))),d=Object(ve.a)(o,2),u=d[0];function j(){return(j=Object(ee.a)(X.a.mark((function t(c){var n,s,a,i,o;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(c),t.prev=1,n=new Date(c.startDate).setHours(0,0,0,0),s=new Date(c.endDate).setHours(0,0,0,0),a=(new Date).setHours(0,0,0,0),!(n.valueOf()>s.valueOf())){t.next=10;break}return alert("endDate can't be less then startDate"),t.abrupt("return");case 10:if(!(s.valueOf()<a.valueOf())){t.next=13;break}return alert("startDate can't be less then current Date"),t.abrupt("return");case 13:return c.image="none",c.id=+e.match.params.id,t.next=17,le.put(ae.urls.companies+"coupons",c);case 17:i=t.sent,o=i.data,H.dispatch(k(o)),ie.success(K.UPDATE_COUPON),r.push("/companies"),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),ie.error(Z.UPDATE_COUPON);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})))).apply(this,arguments)}function b(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}return d[1],Object(n.useEffect)((function(){H.getState().authState.user||(ie.error(Z.PLS_LOGIN),r.push("/login"))})),Object(l.jsxs)("div",{className:"UpdateCompanyCoupon",children:[Object(l.jsx)("h2",{children:"Update Company Coupon"}),Object(l.jsx)("br",{}),Object(l.jsxs)("form",{onSubmit:s((function(e){return j.apply(this,arguments)})),children:[Object(l.jsx)("label",{children:"Category"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"category",name:"category",value:u.category},c("category"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Id"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"number",name:"id",value:u.id},c("id"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Company Id"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",name:"companyID",value:u.companyID},c("companyID"))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Title"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",name:"title",value:u.title},c("title",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Price"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"double",name:"price",defaultValue:u.price},c("price",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Amount"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"number",name:"amount",defaultValue:u.amount},c("amount",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Description"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"text",name:"description",defaultValue:u.description},c("description",{required:!0,minLength:2}))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"Start Date"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"date",name:"startDate",defaultValue:b(u.startDate)},c("startDate",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("label",{children:"End Date"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",Object(x.a)({type:"date",name:"endDate",defaultValue:b(u.endDate)},c("endDate",{required:!0}))),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",color:"primary",children:"Update coupon"})]})]})},Ne=(c(126),function(e){Object(u.a)(c,e);var t=Object(j.a)(c);function c(e){var n;return Object(o.a)(this,c),(n=t.call(this,e)).unsubscribe=void 0,n.state={coupons:H.getState().CustomerState.customer,couponsPurchase:H.getState().customerPurchaseState.customerPurchase,user:H.getState().authState.user},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(X.a.mark((function e(){var t,c,n,s=this;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(null===(t=this.state.user)||void 0===t?void 0:t.clientType),console.log(pe.customer),(null===(c=this.state.user)||void 0===c?void 0:c.clientType)!==pe.customer&&ie.error(Z.PLS_LOGIN),this.unsubscribe=H.subscribe((function(){s.setState({coupons:H.getState().CustomerState.customer,couponsPurchase:H.getState().customerPurchaseState.customerPurchase})})),e.prev=4,e.next=7,le.put(ae.urls.customers+"coupon");case 7:n=e.sent,console.log(n.status),H.dispatch(R(n.data)),this.setState({couponsPurchase:n.data}),ie.success(K.PURCHASED_COUPONS),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),ie.error(Z.GET_COUPONS_PURCHASE);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"getDate",value:function(e){var t=new Date(e),c=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2);return("0"+t.getDate()).slice(-2)+"-"+n+"-"+c}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"CustomerPurchases",children:[Object(l.jsx)("h1",{children:"Purchased Coupons"}),0!==this.state.couponsPurchase.length&&Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"CATEGORY"}),Object(l.jsx)("th",{children:"TITLE"}),Object(l.jsx)("th",{children:"PRICE"}),Object(l.jsx)("th",{children:"DESCRIPTION"}),Object(l.jsx)("th",{children:"START DATE"}),Object(l.jsx)("th",{children:"END DATE"}),Object(l.jsx)("th",{children:"IMAGE"})]})}),Object(l.jsx)("tbody",{children:this.state.couponsPurchase.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.category}),Object(l.jsx)("td",{children:t.title}),Object(l.jsxs)("td",{children:[t.price,"$"]}),Object(l.jsx)("td",{children:t.description}),Object(l.jsx)("td",{children:e.getDate(t.startDate)}),Object(l.jsx)("td",{children:e.getDate(t.endDate)}),Object(l.jsx)("td",{children:Object(l.jsx)("img",{src:t.image,alt:" "})})]},t.id)}))})]})]})}}]),c}(n.Component));var Te=function(){return Object(l.jsx)("div",{className:"Routing",children:Object(l.jsxs)(B.d,{children:[Object(l.jsx)(B.b,{path:"/home",component:J,exact:!0}),Object(l.jsx)(B.b,{path:"/specials",component:de,exact:!0}),Object(l.jsx)(B.b,{path:"/login",component:oe,exact:!0}),Object(l.jsx)(B.b,{path:"/logout",component:ue,exact:!0}),Object(l.jsx)(B.b,{path:"/admin",component:he,exact:!0}),Object(l.jsx)(B.b,{path:"/customers",component:me,exact:!0}),Object(l.jsx)(B.b,{path:"/companies",component:xe,exact:!0}),Object(l.jsx)(B.b,{path:"/admin/company/add",component:fe,exact:!0}),Object(l.jsx)(B.b,{path:"/admin/customer/add",component:ye,exact:!0}),Object(l.jsx)(B.b,{path:"/admin/company/update/:id",component:De,exact:!0}),Object(l.jsx)(B.b,{path:"/admin/customer/update/:id",component:Ce,exact:!0}),Object(l.jsx)(B.b,{path:"/companies/coupon/add",component:Ee,exact:!0}),Object(l.jsx)(B.b,{path:"/companies/coupon/update/:id",component:Ae,exact:!0}),Object(l.jsx)(B.b,{path:"/purchaseslist/:id",component:Ne,exact:!0}),Object(l.jsx)(B.a,{from:"/",to:"home",exact:!0}),Object(l.jsx)(B.b,{component:$})]})})};c(127),c(128);var Pe=function(){return Object(l.jsxs)("div",{className:"RightMenu",children:[Object(l.jsx)("span",{children:"get your coupons here"}),Object(l.jsx)("br",{}),Object(l.jsx)("img",{src:"https://picsum.photos/150",alt:""})]})},Ue=c(33),we=c(152),_e=c(154),ke=c(149),Le=c(153),Me=c(151);c(129);function Ie(){var e=n.useState({left:!1}),t=Object(ve.a)(e,2),c=t[0],s=t[1],a=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&s(Object(x.a)(Object(x.a)({},c),{},Object(Ue.a)({},e,t)))}},r=function(e){return Object(l.jsxs)(we.a,{sx:{width:170},role:"presentation",onClick:a(e,!1),onKeyDown:a(e,!1),children:[Object(l.jsxs)(_e.a,{children:[Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Default Menu"}),Object(l.jsx)(p.b,{to:"/home",exact:!0,children:"Home"}),Object(l.jsx)("br",{}),Object(l.jsx)(p.b,{to:"/contactus",exact:!0,children:"Contact_Us"}),Object(l.jsx)("br",{}),Object(l.jsx)(p.b,{to:"/about",exact:!0,children:"About"})]})]}),Object(l.jsx)(ke.a,{}),Re()]})};return Object(l.jsx)("div",{className:"mebutton",children:["left"].map((function(e){return Object(l.jsxs)(n.Fragment,{children:[Object(l.jsx)(Le.a,{className:"menubutton",onClick:a(e,!0),children:"Menu"}),Object(l.jsx)(Me.a,{anchor:e,open:c[e],onClose:a(e,!1),children:r(e)})]},e)}))})}function Re(){try{switch(H.getState().authState.user.clientType){case pe.admin:return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Admin Menu"}),Object(l.jsx)(p.b,{to:"/admin",exact:!0,children:"Admin Menu"}),Object(l.jsx)("br",{})]});case pe.company:return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Company Menu"}),Object(l.jsx)(p.b,{to:"/companies",exact:!0,children:"Company Menu"}),Object(l.jsx)("br",{})]});case pe.customer:return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Customer Menu"}),Object(l.jsx)(p.b,{to:"/customers",exact:!0,children:"Customer Menu"}),Object(l.jsx)("br",{})]})}}catch(e){}}var Ge=function(){return Object(l.jsx)(p.a,{children:Object(l.jsxs)("section",{className:"myGrid",children:[Object(l.jsx)("div",{className:"header",children:Object(l.jsx)(W,{})}),Object(l.jsx)("div",{className:"leftSidebar",children:Object(l.jsx)(Ie,{})}),Object(l.jsx)("div",{className:"main",children:Object(l.jsx)(Te,{})}),Object(l.jsx)("div",{className:"rightSidebar",children:Object(l.jsx)(Pe,{})}),Object(l.jsx)("div",{className:"footer",children:Object(l.jsx)(h,{})})]})})};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(Ge,{})}),document.getElementById("root")),i()},80:function(e,t,c){},81:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},94:function(e,t,c){}},[[130,1,2]]]);
//# sourceMappingURL=main.2468b5e5.chunk.js.map